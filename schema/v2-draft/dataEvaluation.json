{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "DRAFT - FA Metadata Data Evaluation Section v2.0 (NOT FOR PRODUCTION USE)",
  "version": "2.0-draft",
  "description": "⚠️ WARNING: This is a DRAFT schema with breaking changes. Use v1.1 for production. This v2-draft uses camelCase property names which are NOT backward compatible with v1.x. Metadata about measurement evaluation including points and regions of interest.",
  "type": "object",
  "properties": {
    "dataEvaluation": {
      "description": "Contains evaluation metadata such as POIs and ROIs.",
      "type": [
        "object",
        "null"
      ],
      "properties": {
        "imageLabel": {
          "description": "Label/caption for the image (e.g., failure mode description).",
          "type": "string"
        },
        "imageId": {
          "description": "Unique identifier for the image.",
          "type": "string"
        },
        "pointsOfInterest": {
          "description": "Array of points of interest (POI) marked on the image.",
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "object",
            "required": [
              "name",
              "coordinates"
            ],
            "properties": {
              "name": {
                "description": "Name of the POI.",
                "type": "string"
              },
              "label": {
                "description": "Label categorizing the POI (e.g., failure mode class).",
                "type": "string"
              },
              "id": {
                "description": "Unique ID for the POI.",
                "type": "string"
              },
              "coordinates": {
                "description": "X and Y coordinates of the POI.",
                "type": "object",
                "properties": {
                  "value": {
                    "type": "array",
                    "items": {
                      "type": [
                        "number",
                        "null"
                      ]
                    },
                    "minItems": 2,
                    "maxItems": 2
                  },
                  "unit": {
                    "type": "string",
                    "examples": [
                      "px",
                      "µm",
                      "nm"
                    ]
                  }
                }
              }
            }
          }
        },
        "regionsOfInterest": {
          "description": "Container for different types of ROIs.",
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "polygons": {
              "description": "Array of polygon ROIs.",
              "type": [
                "array",
                "null"
              ],
              "items": {
                "type": "object",
                "required": [
                  "name",
                  "coordinates"
                ],
                "properties": {
                  "name": {
                    "description": "Name of the polygon.",
                    "type": "string"
                  },
                  "label": {
                    "description": "Label categorizing the ROI.",
                    "type": "string"
                  },
                  "id": {
                    "description": "Unique ID for the polygon.",
                    "type": "string"
                  },
                  "coordinates": {
                    "description": "Array of [X, Y] vertex coordinates defining the polygon.",
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": "array",
                        "items": {
                          "type": "array",
                          "items": {
                            "type": [
                              "number",
                              "null"
                            ]
                          },
                          "minItems": 2,
                          "maxItems": 2
                        }
                      },
                      "unit": {
                        "type": "string"
                      }
                    }
                  },
                  "area": {
                    "description": "Area enclosed by the polygon.",
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": [
                          "number",
                          "null"
                        ]
                      },
                      "unit": {
                        "type": "string",
                        "examples": [
                          "µm²",
                          "nm²"
                        ]
                      }
                    }
                  },
                  "fillColor": {
                    "description": "Fill color in RGBA format [R, G, B, A] (0.0 to 1.0).",
                    "type": "array",
                    "items": {
                      "type": [
                        "number",
                        "null"
                      ],
                      "minimum": 0.0,
                      "maximum": 1.0
                    },
                    "minItems": 4,
                    "maxItems": 4
                  },
                  "strokeColor": {
                    "description": "Stroke color in RGB format [R, G, B] (0.0 to 1.0).",
                    "type": "array",
                    "items": {
                      "type": [
                        "number",
                        "null"
                      ],
                      "minimum": 0.0,
                      "maximum": 1.0
                    },
                    "minItems": 3,
                    "maxItems": 3
                  },
                  "strokeWidth": {
                    "description": "Width of the stroke.",
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": [
                          "number",
                          "null"
                        ]
                      },
                      "unit": {
                        "type": "string",
                        "default": "px"
                      }
                    }
                  }
                }
              }
            },
            "polylines": {
              "description": "Array of polyline ROIs (open paths).",
              "type": [
                "array",
                "null"
              ],
              "items": {
                "type": "object",
                "required": [
                  "name",
                  "coordinates"
                ],
                "properties": {
                  "name": {
                    "description": "Name of the polyline.",
                    "type": "string"
                  },
                  "label": {
                    "description": "Label categorizing the ROI.",
                    "type": "string"
                  },
                  "id": {
                    "description": "Unique ID for the polyline.",
                    "type": "string"
                  },
                  "coordinates": {
                    "description": "Array of [X, Y] vertex coordinates defining the polyline.",
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": "array",
                        "items": {
                          "type": "array",
                          "items": {
                            "type": [
                              "number",
                              "null"
                            ]
                          },
                          "minItems": 2,
                          "maxItems": 2
                        }
                      },
                      "unit": {
                        "type": "string"
                      }
                    }
                  },
                  "strokeColor": {
                    "description": "Stroke color in RGB format [R, G, B] (0.0 to 1.0).",
                    "type": "array",
                    "items": {
                      "type": [
                        "number",
                        "null"
                      ],
                      "minimum": 0.0,
                      "maximum": 1.0
                    },
                    "minItems": 3,
                    "maxItems": 3
                  },
                  "strokeWidth": {
                    "description": "Width of the stroke.",
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": [
                          "number",
                          "null"
                        ]
                      },
                      "unit": {
                        "type": "string",
                        "default": "px"
                      }
                    }
                  }
                }
              }
            },
            "rectangles": {
              "description": "Array of rectangle ROIs defined by center coordinates, dimensions, and optional rotation. Provides guaranteed rectangular shapes suitable for bounding boxes and ML annotation workflows.",
              "type": [
                "array",
                "null"
              ],
              "items": {
                "type": "object",
                "required": [
                  "name",
                  "centerCoordinates",
                  "width",
                  "height"
                ],
                "properties": {
                  "name": {
                    "description": "Name of the rectangle.",
                    "type": "string"
                  },
                  "label": {
                    "description": "Label categorizing the ROI (e.g., failure mode class or object type).",
                    "type": "string"
                  },
                  "id": {
                    "description": "Unique ID for the rectangle.",
                    "type": "string"
                  },
                  "centerCoordinates": {
                    "description": "X and Y coordinates of the rectangle's center point.",
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": "array",
                        "items": {
                          "type": [
                            "number",
                            "null"
                          ]
                        },
                        "minItems": 2,
                        "maxItems": 2
                      },
                      "unit": {
                        "type": "string",
                        "examples": [
                          "px",
                          "µm",
                          "nm"
                        ]
                      }
                    }
                  },
                  "width": {
                    "description": "Width of the rectangle measured along its local x-axis (before rotation).",
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": [
                          "number",
                          "null"
                        ]
                      },
                      "unit": {
                        "type": "string",
                        "examples": [
                          "µm",
                          "nm",
                          "px"
                        ]
                      }
                    }
                  },
                  "height": {
                    "description": "Height of the rectangle measured along its local y-axis (before rotation).",
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": [
                          "number",
                          "null"
                        ]
                      },
                      "unit": {
                        "type": "string",
                        "examples": [
                          "µm",
                          "nm",
                          "px"
                        ]
                      }
                    }
                  },
                  "rotationAngle": {
                    "description": "Optional rotation angle of the rectangle around its center point, measured counter-clockwise from the positive x-axis. Defaults to 0 (axis-aligned) if not specified.",
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": [
                          "number",
                          "null"
                        ]
                      },
                      "unit": {
                        "type": "string",
                        "enum": [
                          "deg",
                          "rad"
                        ],
                        "examples": [
                          "deg",
                          "rad"
                        ]
                      }
                    }
                  },
                  "area": {
                    "description": "Area of the rectangle (width × height).",
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": [
                          "number",
                          "null"
                        ]
                      },
                      "unit": {
                        "type": "string",
                        "examples": [
                          "µm²",
                          "nm²",
                          "px²"
                        ]
                      }
                    }
                  },
                  "fillColor": {
                    "description": "Fill color in RGBA format [R, G, B, A] (0.0 to 1.0).",
                    "type": "array",
                    "items": {
                      "type": [
                        "number",
                        "null"
                      ],
                      "minimum": 0.0,
                      "maximum": 1.0
                    },
                    "minItems": 4,
                    "maxItems": 4
                  },
                  "strokeColor": {
                    "description": "Stroke color in RGB format [R, G, B] (0.0 to 1.0).",
                    "type": "array",
                    "items": {
                      "type": [
                        "number",
                        "null"
                      ],
                      "minimum": 0.0,
                      "maximum": 1.0
                    },
                    "minItems": 3,
                    "maxItems": 3
                  },
                  "strokeWidth": {
                    "description": "Width of the stroke.",
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": [
                          "number",
                          "null"
                        ]
                      },
                      "unit": {
                        "type": "string",
                        "default": "px"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}